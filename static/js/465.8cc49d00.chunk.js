!function(){"use strict";var n={7465:function(n,t,e){var i=e(7762),o=e(7760),s={clock:null,periodSeconds:1,periodOffset:0,bounds:null,innerBounds:null,hasInnerBounds:!1,velocityMaxLength:0,velocityMaxLengthSq:0,attractionRepulsionBias:0,attractionRepulsionIntensity:0,revertIntensity:0,distancingLengthSquared:0,distancingIntensity:0,matchingVelocityIntensity:0,boundingReturnIntensity:0,totaledCenter:null,totaledVelocity:null,length:0,initialPositions:[],positions:[],velocities:[]},r={handleInit:function(n){s.clock=new o.Clock,s.periodSeconds=n.periodSeconds,s.periodOffset=o.MathUtils.randFloat(0,s.periodSeconds),s.bounds=new o.Vector3(n.bounds[0],n.bounds[1],n.bounds[2]),s.innerBounds=new o.Vector3(n.innerBounds[0],n.innerBounds[1],n.innerBounds[2]),s.hasInnerBounds=s.innerBounds.lengthSq()>0,n.distancingThreshold>0?(s.distancingLengthSquared=s.bounds.lengthSq()*n.distancingThreshold,s.distancingIntensity=.1):(s.distancingLengthSquared=0,s.distancingIntensity=0);var t=s.bounds.clone().multiplyScalar(n.maximumVelocity);if(s.velocityMaxLength=t.length(),s.velocityMaxLengthSq=t.lengthSq(),s.length=n.initialPositions.length,s.length<2)throw Error("At least two boids must be provided!");s.totaledCenter=new o.Vector3,s.totaledVelocity=new o.Vector3;var e,r=(0,i.Z)(n.initialPositions);try{for(r.s();!(e=r.n()).done;){var a=e.value,c=new o.Vector3(a[0],a[1],a[2]);s.initialPositions.push(c.clone()),s.positions.push(c),s.totaledCenter.add(c),s.velocities.push(new o.Vector3)}}catch(l){r.e(l)}finally{r.f()}s.attractionRepulsionBias=n.attractionRepulsionBias,s.attractionRepulsionIntensity=n.attractionRepulsionIntensity,s.revertIntensity=n.revertIntensity,s.matchingVelocityIntensity=n.matchingVelocityIntensity,s.boundingReturnIntensity=n.boundingReturnIntensity},getCenterMassAttractionRepulsionVector:function(n){var t=s.positions[n],e=s.totaledCenter.clone();return e.sub(t),e.divideScalar(s.length-1),e},getInitialPositionVector:function(n){var t=s.positions[n],e=s.initialPositions[n].clone();return e.sub(t),e},getDistancingVector:function(n){for(var t=s.positions[n],e=new o.Vector3,i=0;i<s.length;i++)if(i!==n){var r=s.positions[i];t.distanceToSquared(r)<s.distancingLengthSquared&&e.sub(r).add(t)}return e},getMatchingVector:function(n){var t=s.velocities[n],e=s.totaledVelocity.clone();return e.sub(t),e.divideScalar(s.length-1),e.sub(t)},getBoundsVector:function(n){var t=new o.Vector3,e=s.positions[n];if(e.x>s.bounds.x?t.setX(-s.bounds.x):e.x<-s.bounds.x&&t.setX(s.bounds.x),e.y>s.bounds.y?t.setY(-s.bounds.y):e.y<-s.bounds.y&&t.setY(s.bounds.y),e.z>s.bounds.z?t.setZ(-s.bounds.z):e.z<-s.bounds.z&&t.setZ(s.bounds.z),s.hasInnerBounds&&0===t.lengthSq()){var i=0,r=0,a=0;e.x<s.innerBounds.x&&e.x>-s.innerBounds.x&&(i=e.x>0?s.innerBounds.x:-s.innerBounds.x),e.y<s.innerBounds.y&&e.y>-s.innerBounds.y&&(r=e.y>0?s.innerBounds.y:-s.innerBounds.y),e.z<s.innerBounds.z&&e.z>-s.innerBounds.z&&(a=e.z>0?s.innerBounds.z:-s.innerBounds.z),0!==i&&0!==r&&0!==a&&t.set(i,r,a)}return t},handleReady:function(){for(var n=(s.clock.getElapsedTime()+s.periodOffset)/s.periodSeconds,t=n-Math.floor(n),e=o.MathUtils.clamp(Math.sin(2*t*Math.PI)+s.attractionRepulsionBias,-1,1),i=new o.Vector3,r=new o.Vector3,a=0;a<s.length;a++){var c=new o.Vector3;s.attractionRepulsionIntensity>0&&0!==e&&c.addScaledVector(this.getCenterMassAttractionRepulsionVector(a),e*s.attractionRepulsionIntensity),s.distancingLengthSquared>0&&s.distancingIntensity>0&&c.addScaledVector(this.getDistancingVector(a),s.distancingIntensity),0!==s.matchingVelocityIntensity&&c.addScaledVector(this.getMatchingVector(a),s.matchingVelocityIntensity),0!==s.revertIntensity&&c.addScaledVector(this.getInitialPositionVector(a),s.revertIntensity),0!==s.boundingReturnIntensity&&c.addScaledVector(this.getBoundsVector(a),s.boundingReturnIntensity),s.velocities[a].add(c),s.velocityMaxLength>0&&s.velocities[a].lengthSq()>s.velocityMaxLengthSq&&s.velocities[a].normalize().multiplyScalar(s.velocityMaxLength),s.positions[a].add(s.velocities[a]),i.add(s.positions[a]),r.add(s.velocities[a])}s.totaledCenter=i,s.totaledVelocity=r;var l=[],d={type:"result",clockPercentage:t,attractionRepulsionFactor:e,means:[],stdevs:[],positions:[]};d.means=[s.totaledCenter.x/s.length,s.totaledCenter.y/s.length,s.totaledCenter.z/s.length];for(var u=0,h=0,g=0,y=0;y<s.length;y++){var p=s.positions[y],f=new Float32Array(3);f[0]=p.x,f[1]=p.y,f[2]=p.z,u+=Math.pow(f[0]-d.means[0],2),h+=Math.pow(f[1]-d.means[1],2),g+=Math.pow(f[2]-d.means[2],2),d.positions.push(f),l.push(f.buffer)}d.stdevs=[Math.max(Math.sqrt(u/s.length),.01),Math.max(Math.sqrt(h/s.length),.01),Math.max(Math.sqrt(g/s.length),.01)],self.postMessage(d,l)},handleReset:function(){for(var n=new o.Vector3,t=0;t<s.length;t++)s.positions[t].copy(s.initialPositions[t]),n.add(s.positions[t]),s.velocities[t].multiplyScalar(0);s.totaledCenter=n,s.totaledVelocity.multiplyScalar(0)}};self.onmessage=function(n){switch(n.data.type){case"init":r.handleInit(n.data);break;case"ready":r.handleReady();break;case"reset":r.handleReset();break;default:console.warn("unrecognized message type: ".concat(n.data.type),n)}}}},t={};function e(i){var o=t[i];if(void 0!==o)return o.exports;var s=t[i]={exports:{}};return n[i](s,s.exports,e),s.exports}e.m=n,e.x=function(){var n=e.O(void 0,[760],(function(){return e(7465)}));return n=e.O(n)},function(){var n=[];e.O=function(t,i,o,s){if(!i){var r=1/0;for(d=0;d<n.length;d++){i=n[d][0],o=n[d][1],s=n[d][2];for(var a=!0,c=0;c<i.length;c++)(!1&s||r>=s)&&Object.keys(e.O).every((function(n){return e.O[n](i[c])}))?i.splice(c--,1):(a=!1,s<r&&(r=s));if(a){n.splice(d--,1);var l=o();void 0!==l&&(t=l)}}return t}s=s||0;for(var d=n.length;d>0&&n[d-1][2]>s;d--)n[d]=n[d-1];n[d]=[i,o,s]}}(),e.d=function(n,t){for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},e.f={},e.e=function(n){return Promise.all(Object.keys(e.f).reduce((function(t,i){return e.f[i](n,t),t}),[]))},e.u=function(n){return"static/js/"+n+".025b1d20.chunk.js"},e.miniCssF=function(n){},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="/fermata/",function(){var n={465:1,553:1};e.f.i=function(t,i){n[t]||importScripts(e.p+e.u(t))};var t=self.webpackChunkfermata=self.webpackChunkfermata||[],i=t.push.bind(t);t.push=function(t){var o=t[0],s=t[1],r=t[2];for(var a in s)e.o(s,a)&&(e.m[a]=s[a]);for(r&&r(e);o.length;)n[o.pop()]=1;i(t)}}(),function(){var n=e.x;e.x=function(){return e.e(760).then(n)}}();e.x()}();
//# sourceMappingURL=465.8cc49d00.chunk.js.map